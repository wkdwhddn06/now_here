# 🤖 AI 이벤트 생성 기능

## 📋 기능 개요

광고 배너에서 "같이 하기" 버튼을 통해 AI가 자동으로 이벤트를 생성하고, 채팅방에서 실시간으로 참여할 수 있는 기능입니다.

## ✨ 주요 기능

### 1. 배너에서 이벤트 생성
- 🎯 광고 배너 클릭 시 "같이 하기" 버튼 표시
- 🤖 Firebase Vertex AI를 통한 자동 이벤트 생성
- 📍 위치 및 가게 정보 기반 맞춤형 이벤트

### 2. 스마트 이벤트 정보
AI가 배너 정보를 분석하여 다음을 자동 생성:
- **이벤트 제목**: "정미네 손만두 런치 모임"
- **상세 설명**: "맛있는 손만두 먹으면서 새친구 만들어요"
- **만날 시간**: "오늘 오후 7시"
- **만날 장소**: "가게 앞에서 만나요"
- **참여 인원**: 2-6명 자동 설정
- **특별 안내**: "더치페이로 진행해요"

### 3. 실시간 채팅방 이벤트
- 💬 채팅방에 이벤트 참여 버블 자동 표시
- 👥 실시간 참여자 수 업데이트
- ⏰ 자동 만료 시간 (2시간 후)
- 🔄 참여/취소 즉시 반영

### 4. 이벤트 상태 관리
- **모집중**: 참여 가능한 상태
- **인원마감**: 최대 인원 도달
- **마감됨**: 시간 만료
- **취소됨**: 생성자가 취소

## 🏗️ 구현 아키텍처

### 데이터 모델
```dart
ChatEvent {
  - id: 이벤트 고유 ID
  - title: 이벤트 제목
  - description: 상세 설명
  - storeName: 가게명
  - meetingTime: 만날 시간
  - meetingPlace: 만날 장소
  - maxParticipants: 최대 참여자 수
  - participants: 현재 참여자 목록
  - status: 이벤트 상태
  - eventType: 이벤트 유형 (meal/coffee/shopping/activity)
}
```

### 서비스 구조
1. **AiEventService**: Firebase Vertex AI를 통한 이벤트 생성
2. **EventService**: Firestore를 통한 이벤트 CRUD 및 실시간 동기화
3. **EventBubble**: 채팅방 내 이벤트 UI 컴포넌트

### Firebase 구조
```
chatRooms/{chatRoomId}/events/{eventId}
└── ChatEvent 데이터
```

## 🎨 UI/UX 특징

### 이벤트 버블 디자인
- 🎨 이벤트 타입별 색상 구분
  - 🍽️ 식사: 오렌지
  - ☕ 카페: 브라운
  - 🛍️ 쇼핑: 퍼플
  - 🎯 활동: 블루

### 상호작용 버튼
- **참여하기**: 초록색 버튼으로 참여 유도
- **참여 취소**: 회색 버튼으로 취소 가능
- **이벤트 취소**: 생성자만 빨간색 버튼으로 취소

### 실시간 피드백
- 📱 햅틱 피드백
- 💬 스낵바를 통한 상태 알림
- 🔄 로딩 상태 표시

## 🚀 사용 시나리오

### 1. 이벤트 생성 과정
1. 사용자가 광고 배너 클릭
2. "같이 하기" 버튼 선택
3. AI가 배너 정보 분석하여 이벤트 생성
4. 채팅방에 이벤트 버블 자동 표시

### 2. 참여 과정
1. 다른 사용자가 이벤트 버블 확인
2. "참여하기" 버튼 클릭
3. 실시간으로 참여자 수 업데이트
4. 참여자들에게 알림 표시

### 3. 관리 과정
- 생성자는 언제든 이벤트 취소 가능
- 참여자는 언제든 참여 취소 가능
- 2시간 후 자동 만료
- 만료된 이벤트 자동 정리

## 🔐 보안 및 권한

### Firestore 보안 규칙
```javascript
match /chatRooms/{roomId}/events/{eventId} {
  allow read: if request.auth != null;
  allow create: if request.auth != null && 
                 request.auth.uid == resource.data.creatorId;
  allow update: if request.auth != null &&
                 (request.auth.uid == resource.data.creatorId || 
                  request.auth.uid in resource.data.participants);
}
```

## 🎯 AI 프롬프트 최적화

AI가 생성하는 이벤트의 품질을 위해 다음을 고려:
- **현실적인 시간 설정**: "오늘 저녁 7시", "내일 점심"
- **구체적인 장소**: "가게 앞에서", "지하철 2번 출구"
- **친근한 톤**: "같이 가서 맛있게 먹어요"
- **실용적인 안내**: "더치페이로 진행", "미리 예약해놨어요"

## 📊 기대 효과

1. **사용자 참여도 증가**: 광고에서 즉시 모임 생성
2. **자연스러운 소셜 네트워킹**: AI 기반 맞춤형 이벤트
3. **지역 상권 활성화**: 실제 가게 방문 유도
4. **앱 체류 시간 증가**: 실시간 이벤트 참여

## 🔧 기술 스택

- **AI**: Firebase Vertex AI (Gemini 1.5 Flash)
- **데이터베이스**: Cloud Firestore
- **실시간 동기화**: Firestore Realtime Updates
- **상태 관리**: Flutter StatefulWidget
- **UI 라이브러리**: Material Design 3

## 📈 향후 개선 계획

1. **푸시 알림**: 이벤트 참여/취소 시 알림
2. **이벤트 기록**: 참여한 이벤트 히스토리
3. **평가 시스템**: 이벤트 후 별점 및 리뷰
4. **고급 매칭**: 사용자 취향 기반 이벤트 추천
5. **그룹 채팅**: 이벤트 참여자들만의 채팅방

---

✨ **결과**: 광고 배너 → AI 이벤트 생성 → 실시간 참여까지 완전 자동화된 소셜 네트워킹 플랫폼 완성! 